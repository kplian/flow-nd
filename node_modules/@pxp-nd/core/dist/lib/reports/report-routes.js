"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getReportsRouter = void 0;
const express_1 = require("express");
const pdf_1 = require("./pdf");
// import { makeCsv } from './csv';
const xlsx_1 = require("./xlsx");
const generated_1 = require("./generated");
const getReportsRouter = (config, ReportEnity, ReportGroupEntitiy) => {
    const reportsRouter = express_1.Router();
    const prefix = config.apiPrefix;
    const middlewares = config.middlewares || [];
    reportsRouter.post(prefix + '/pdf', pdf_1.makePdf);
    reportsRouter.get(prefix + '/pdf', pdf_1.makePdf);
    // reportsRouter.get(prefix + '/csv', makeCsv);
    reportsRouter.get(prefix + '/xlsx', xlsx_1.makeXlsx);
    reportsRouter.get(prefix + '/reports/groups', middlewares, generated_1.listGroup(ReportGroupEntitiy));
    reportsRouter.get(prefix + '/reports/:groupId', middlewares, generated_1.listReports(ReportEnity));
    reportsRouter.get(prefix + '/reports/:id/data', middlewares, generated_1.getReport(ReportEnity));
    reportsRouter.get(prefix + '/reports/:id/generate', middlewares, generated_1.generateReport(ReportEnity));
    reportsRouter.get(prefix + '/reports/:id/generate/:type', middlewares, generated_1.generateReport(ReportEnity));
    return reportsRouter;
};
exports.getReportsRouter = getReportsRouter;
